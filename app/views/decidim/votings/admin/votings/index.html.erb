<div class="card">
  <div class="card-divider">
    <h2 class="card-title">
      <%= t('.title') %>
      <%= link_to t('actions.new', scope: 'decidim.budgets', name: t('models.voting.name', scope: 'decidim.votings.admin')),
                  new_voting_path, class: 'button tiny button--title' if can? :manage, current_feature %>
    </h2>
  </div>

  <div class="card-section">
    <div class="table-scroll">
      <table class="table-list">
        <thead>
        <tr>
          <th>
            <%=t 'models.voting.fields.title', scope: 'decidim.votings'  %>
          </th>
          <th class="actions"><%=t 'actions.title', scope: 'decidim.votings' %></th>
        </tr>
        </thead>
        <tbody>
        <% votings.each do |voting| %>
            <tr data-id="<%= voting.id %>">
              <td>
                <%= translated_attribute(voting.title) %>
              </td>
              <td class="table-list__actions">
                <%= icon_link_to 'eye',
                                 resource_locator(voting).path(key: voting.simulation_key),
                                 t('actions.preview', scope: 'decidim.votings'),
                                 target: :blank,
                                 class: 'action-icon--preview' %>

                <% if can? :update, current_feature %>
                    <%= icon_link_to 'pencil',
                                     edit_voting_path(voting),
                                     t('actions.edit', scope: 'decidim.votings'),
                                     class: 'action-icon--edit' %>
                <% end %>

                <% if can? :destroy, current_feature %>
                    <%= icon_link_to 'circle-x',
                                     voting_path(voting),
                                     t('actions.destroy', scope: 'decidim.votings'),
                                     method: :delete,
                                     class: 'action-icon--remove',
                                     data: { confirm: t('actions.confirm_destroy', scope: 'decidim.votings') } %>
                <% end %>
              </td>
            </tr>
        <% end %>
        </tbody>
      </table>
      <%= paginate votings, theme: 'decidim' %>
    </div>
  </div>
</div>
